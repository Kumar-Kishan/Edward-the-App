webpackJsonp([3],{"+KFR":function(e,t,n){"use strict";var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"v-spinner"},[n("div",{staticClass:"v-pulse v-pulse1",style:[e.spinnerStyle,e.spinnerDelay1]}),n("div",{staticClass:"v-pulse v-pulse2",style:[e.spinnerStyle,e.spinnerDelay2]}),n("div",{staticClass:"v-pulse v-pulse3",style:[e.spinnerStyle,e.spinnerDelay3]})])},r=[],i={render:s,staticRenderFns:r};t.a=i},"/P70":function(e,t){},"0Voz":function(e,t){},"3rO/":function(e,t,n){"use strict";var s=n("Tjr7");t.a={beforeCreate:function(){var e=this;s.a.getSpaceOverages().then(function(t){e.overages=t},function(t){e.error=t})},data:function(){return{error:null,overages:null}}}},"4ELI":function(e,t,n){"use strict";var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wrap"},[n("h4",[e._v("This is a restricted Admin page.")]),e._v(" "),n("hr"),e._v(" "),n("router-view")],1)},r=[],i={render:s,staticRenderFns:r};t.a=i},"69fR":function(e,t){},"6Zjp":function(e,t,n){"use strict";var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"stat"},[n("p",[e._v("Unverified users (limit 150):")]),e._v(" "),e.users?n("p",{domProps:{textContent:e._s(e.usersDisplay)}}):e._e(),e._v(" "),n("button",{staticClass:"button-green",on:{click:function(t){e.deleteUnverified()}}},[e._v("Delete unverified users older than 3 days")]),e._v(" "),e.success?n("div",{staticClass:"success"},[e._v("Success!")]):e._e(),e._v(" "),e.error?n("div",{staticClass:"error",domProps:{textContent:e._s(e.error)}}):e._e()])},r=[],i={render:s,staticRenderFns:r};t.a=i},"9PmJ":function(e,t,n){"use strict";function s(e){n("mx6j")}var r=n("VYuF"),i=n("VBdE"),a=n("VU/8"),o=s,u=a(r.a,i.a,o,"data-v-66a0a30b",null);t.a=u.exports},"9TLP":function(e,t,n){"use strict";function s(e){n("/P70")}var r=n("sMMB"),i=n("YzJe"),a=n("VU/8"),o=s,u=a(r.a,i.a,o,"data-v-170d2232",null);t.a=u.exports},EKqe:function(e,t){},H0Ue:function(e,t,n){"use strict";var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"stat"},[null!==e.userCount?n("div",[e._m(0),e._v(" "),n("p",[e._v("Demo: "+e._s(e.userCount.demo))]),e._v(" "),n("p",[e._v("Limited: "+e._s(e.userCount.limited))]),e._v(" "),n("p",[e._v("Premium: "+e._s(e.userCount.premium))]),e._v(" "),n("p",[e._v("Gold: "+e._s(e.userCount.gold))]),e._v(" "),n("p",[e._v("Admin: "+e._s(e.userCount.admin))]),e._v(" "),n("p",[e._v("TOTAL: "+e._s(e.totalUsers))])]):e._e(),e._v(" "),e.error?n("div",{staticClass:"error",domProps:{textContent:e._s(e.error)}}):e._e()])},r=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[n("strong",[e._v("Users by type")])])}],i={render:s,staticRenderFns:r};t.a=i},PDFS:function(e,t){},Q00M:function(e,t){},QW4H:function(e,t,n){"use strict";function s(e){n("PDFS")}var r=n("q8m6"),i=n("nf2L"),a=n("VU/8"),o=s,u=a(r.a,i.a,o,null,null);t.a=u.exports},Tjr7:function(e,t,n){"use strict";var s=n("Zrlr"),r=n.n(s),i=n("wxAW"),a=n.n(i),o=n("mtWM"),u=n.n(o),c=function(e){return"/api/admin/"+e},l=function(){function e(){r()(this,e)}return a()(e,[{key:"simpleGet",value:function(e){return u.a.get(e).then(function(e){return e.data})}},{key:"simplePost",value:function(e,t){return u.a.post(e,t).then(function(e){return e.data})}},{key:"addEmail",value:function(e){var t=e.content,n=e.subject;return this.simplePost(c("emails/new"),{content:t,subject:n})}},{key:"deleteEmail",value:function(e){var t=e.id;return this.simplePost(c("emails/delete"),{id:t})}},{key:"getPendingEmails",value:function(){return this.simpleGet(c("emails/pending"))}},{key:"getUserEmails",value:function(){return this.simpleGet(c("emails/csv"))}},{key:"reviewEmail",value:function(e){var t=e.id;return this.simplePost(c("emails/review"),{id:t})}},{key:"sendEmail",value:function(e){var t=e.id;return this.simplePost(c("emails/send"),{id:t})}},{key:"deleteUnverifiedUsers",value:function(){return this.simplePost(c("delete-unverified"))}},{key:"getSpaceOverages",value:function(){return this.simpleGet(c("space-overages"))}},{key:"getTotalUsers",value:function(){return this.simpleGet(c("total-users"))}},{key:"getUnverifiedUsers",value:function(){return this.simpleGet(c("unverified-users"))}},{key:"compUser",value:function(e){var t=e.id,n=e.months;return this.simplePost(c("comp"),{id:t,months:n})}},{key:"getCompUsers",value:function(){return this.simpleGet(c("comp-users"))}},{key:"uncompUser",value:function(e){var t=e.id;return this.simplePost(c("uncomp"),{id:t})}}]),e}();t.a=new l},UXjS:function(e,t){},UyqZ:function(e,t,n){"use strict";function s(e){n("xUE3")}var r=n("vDN5"),i=n("jxx+"),a=n("VU/8"),o=s,u=a(r.a,i.a,o,"data-v-916d4544",null);t.a=u.exports},VBdE:function(e,t,n){"use strict";var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("p",[e._v("Export user emails as CSV for upload to Mailgun:")]),e._v(" "),n("button",{staticClass:"button-green",on:{click:function(t){e.getUserEmails()}}},[e._v("Export")]),e._v(" "),e.error?n("div",{staticClass:"error",domProps:{textContent:e._s(e.error)}}):e._e(),e._v(" "),n("hr"),e._v(" "),e.pendingEmails?n("div",[n("p",[e._v("Pending emails:")]),e._v(" "),e.pendingEmails.length?e._e():n("p",[e._v("(none)")]),e._v(" "),e._l(e.pendingEmails,function(t){return n("div",{key:t.id},[n("span",[n("strong",{domProps:{textContent:e._s(t.subject)}})]),e._v(" "),n("button",{staticClass:"button-green",on:{click:function(n){e.reviewEmail(t.id)}}},[e._v("Review")]),e._v(" "),n("button",{staticClass:"button-red",on:{click:function(n){e.deleteEmail(t.id)}}},[e._v("Delete")]),e._v(" "),e.reviewedId===t.id?n("span",[e._v("Sent")]):e._e()])})],2):e._e(),e._v(" "),n("hr"),e._v(" "),n("div",{staticClass:"new-email"},[n("p",[e._v("Create a new email:")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newEmail.subject,expression:"newEmail.subject"}],attrs:{type:"text",placeholder:"subject"},domProps:{value:e.newEmail.subject},on:{input:function(t){t.target.composing||e.$set(e.newEmail,"subject",t.target.value)}}}),e._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newEmail.content,expression:"newEmail.content"}],attrs:{placeholder:"content"},domProps:{value:e.newEmail.content},on:{input:function(t){t.target.composing||e.$set(e.newEmail,"content",t.target.value)}}}),e._v(" "),n("button",{staticClass:"button-green",on:{click:function(t){e.createEmail()}}},[e._v("Create")]),e._v(" "),e.success?n("div",{staticClass:"success"},[e._v("Success!")]):e._e()])])},r=[],i={render:s,staticRenderFns:r};t.a=i},VUNc:function(e,t,n){"use strict";var s=n("Tjr7");t.a={beforeCreate:function(){var e=this;s.a.getUnverifiedUsers().then(function(t){e.users=t},function(t){e.error=t})},computed:{usersDisplay:function(){return this.users&&this.users.map(function(e){return e.daysUnverified||(e.daysUnverified=Math.round((Date.now()-new Date(e.created_at))/864e5)),e.email+" ("+e.daysUnverified+" days)"}).join(", ")}},data:function(){return{error:null,success:!1,users:null}},methods:{deleteUnverified:function(){var e=this;this.error=!1,this.success=!1,s.a.deleteUnverifiedUsers().then(function(){e.success=!0},function(t){e.error=t})}}}},VYuF:function(e,t,n){"use strict";var s=n("Tjr7"),r=n("lDdF"),i=n.n(r);t.a={created:function(){this.getPendingEmails()},data:function(){return{error:null,newEmail:{content:null,subject:null},pendingEmails:null,reviewedId:null,success:!1}},methods:{createEmail:function(){var e=this;this.error=null,this.success=!1,s.a.addEmail({content:this.newEmail.content,subject:this.newEmail.subject}).then(function(){e.success=!0,e.newEmail.content=null,e.newEmail.subject=null,e.getPendingEmails()},function(t){e.error=t})},deleteEmail:function(e){var t=this;this.error=null,s.a.deleteEmail({id:e}).then(function(){t.getPendingEmails()},function(e){t.error=e})},getPendingEmails:function(){var e=this;this.error=null,s.a.getPendingEmails().then(function(t){e.pendingEmails=t},function(t){e.error=t})},getUserEmails:function(){var e=this;this.error=null,s.a.getUserEmails().then(function(e){i.a.saveAs(new Blob([e],{type:"text/csv;charset=utf-8"}),"emails-private.csv")},function(t){e.error=t})},reviewEmail:function(e){var t=this;this.error=null,this.reviewedId=null,s.a.reviewEmail({id:e}).then(function(){t.reviewedId=e},function(e){t.error=e})}}}},YLT6:function(e,t,n){"use strict";function s(e){n("UXjS")}var r=n("3rO/"),i=n("xJIA"),a=n("VU/8"),o=s,u=a(r.a,i.a,o,"data-v-1b06ddd5",null);t.a=u.exports},YzIw:function(e,t,n){"use strict";function s(e){n("EKqe")}var r=n("i/iG"),i=n("+KFR"),a=n("VU/8"),o=s,u=a(r.a,i.a,o,null,null);t.a=u.exports},YzJe:function(e,t,n){"use strict";var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wrap"},[e.error||e.success?e._e():n("div",[n("pulse-loader")],1),e._v(" "),e.error?n("div",[n("h4",[e._v("\n      Email failed to send.\n    ")]),e._v(" "),n("p",{domProps:{textContent:e._s(e.error)}})]):e._e(),e._v(" "),e.success?n("div",[n("h4",[e._v("\n      Email sent.\n    ")])]):e._e(),e._v(" "),n("router-link",{attrs:{to:"/overview"}},[e._v("\n    Back to overview\n  ")])],1)},r=[],i={render:s,staticRenderFns:r};t.a=i},aXIO:function(e,t){},eZoM:function(e,t,n){"use strict";var s=n("Tjr7");t.a={beforeCreate:function(){var e=this;s.a.getTotalUsers().then(function(t){e.userCount=t},function(t){e.error=t})},computed:{totalUsers:function(){return this.userCount?Number(this.userCount.demo)+Number(this.userCount.limited)+Number(this.userCount.premium)+Number(this.userCount.gold)+Number(this.userCount.admin):0}},data:function(){return{error:null,userCount:null}}}},gsY6:function(e,t,n){"use strict";function s(e){n("0Voz")}var r=n("eZoM"),i=n("H0Ue"),a=n("VU/8"),o=s,u=a(r.a,i.a,o,"data-v-302eb32d",null);t.a=u.exports},"i/iG":function(e,t,n){"use strict";t.a={name:"PulseLoader",props:{loading:{type:Boolean,default:!0},color:{type:String,default:"#5dc596"},size:{type:String,default:"15px"},margin:{type:String,default:"2px"},radius:{type:String,default:"100%"}},data:function(){return{spinnerStyle:{backgroundColor:this.color,width:this.size,height:this.size,margin:this.margin,borderRadius:this.radius,display:"inline-block",animationName:"v-pulseStretchDelay",animationDuration:"0.75s",animationIterationCount:"infinite",animationTimingFunction:"cubic-bezier(.2,.68,.18,1.08)",animationFillMode:"both"},spinnerDelay1:{animationDelay:"0.12s"},spinnerDelay2:{animationDelay:"0.24s"},spinnerDelay3:{animationDelay:"0.36s"}}}}},it6B:function(e,t){},ivc9:function(e,t,n){"use strict";function s(e){n("it6B")}var r=n("VUNc"),i=n("6Zjp"),a=n("VU/8"),o=s,u=a(r.a,i.a,o,"data-v-8598a324",null);t.a=u.exports},"jxx+":function(e,t,n){"use strict";var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("p",[e._v("Accounts with a payment due date over 35 days from today:")]),e._v(" "),e.compUsers.length?e._e():n("p",[e._v("(none)")]),e._v(" "),e._l(e.compUsers,function(t){return n("div",{key:t.id},[n("span",[e._v("\n      "+e._s(t.email)+" (due "+e._s(t.payment_period_end)+")\n    ")]),e._v(" "),n("button",{staticClass:"button-red",on:{click:function(n){e.uncomp(t.id)}}},[e._v("Uncomp")])])}),e._v(" "),e.error?n("p",{staticClass:"error",domProps:{textContent:e._s(e.error)}}):e._e(),e._v(" "),n("hr"),e._v(" "),n("div",{staticClass:"comp-form"},[n("p",[e._v("Comp an account:")]),e._v(" "),n("div",{staticClass:"comp-form"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.userId,expression:"userId"}],attrs:{type:"number",placeholder:"User ID"},domProps:{value:e.userId},on:{input:function(t){t.target.composing||(e.userId=t.target.value)}}}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.months,expression:"months"}],attrs:{type:"number",placeholder:"# of months to comp"},domProps:{value:e.months},on:{input:function(t){t.target.composing||(e.months=t.target.value)}}}),e._v(" "),n("button",{staticClass:"button-green",on:{click:function(t){e.comp()}}},[e._v("Comp this user")])]),e._v(" "),e.compError?n("div",{staticClass:"error",domProps:{textContent:e._s(e.compError)}}):e._e()])],2)},r=[],i={render:s,staticRenderFns:r};t.a=i},muyx:function(e,t,n){"use strict";t.a={data:function(){return{}}}},mx6j:function(e,t){},nf2L:function(e,t,n){"use strict";var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("total-users"),e._v(" "),n("hr"),e._v(" "),n("space-overages"),e._v(" "),n("hr"),e._v(" "),n("unverified-users"),e._v(" "),n("hr"),e._v(" "),n("user-emails"),e._v(" "),n("hr"),e._v(" "),n("comp-accounts")],1)},r=[],i={render:s,staticRenderFns:r};t.a=i},q8m6:function(e,t,n){"use strict";var s=n("UyqZ"),r=n("YLT6"),i=n("gsY6"),a=n("ivc9"),o=n("9PmJ");t.a={components:{CompAccounts:s.a,SpaceOverages:r.a,TotalUsers:i.a,UnverifiedUsers:a.a,UserEmails:o.a},data:function(){return{}}}},qczc:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("7+uW"),r=n("z9ju"),i=n("sTIG"),a=n("Q00M"),o=(n.n(a),n("69fR"));n.n(o);s.a.config.productionTip=!1,new s.a({el:"#app",components:{Admin:i.a},router:r.a,template:"<Admin/>"})},sMMB:function(e,t,n){"use strict";var s=n("Tjr7"),r=n("YzIw");t.a={beforeCreate:function(){var e=this,t=this.$route.params.id;s.a.sendEmail({id:t}).then(function(){e.success=!0},function(t){e.error=t})},components:{PulseLoader:r.a},data:function(){return{error:null,success:!1}}}},sTIG:function(e,t,n){"use strict";function s(e){n("aXIO")}var r=n("muyx"),i=n("4ELI"),a=n("VU/8"),o=s,u=a(r.a,i.a,o,"data-v-2fc50e56",null);t.a=u.exports},vDN5:function(e,t,n){"use strict";var s=n("Tjr7"),r=n("thjQ"),i=n.n(r);t.a={created:function(){this.getCompUsers()},data:function(){return{compError:null,compUsers:null,error:null,months:null,userId:null}},methods:{comp:function(){var e=this;this.compError=!1,s.a.compUser({id:this.userId,months:this.months}).then(function(){e.months=null,e.userId=null,e.getCompUsers()},function(t){e.compError=t})},getCompUsers:function(){var e=this;s.a.getCompUsers().then(function(t){e.compUsers=t},function(t){e.error=t})},uncomp:function(e){var t=this;i()({buttons:!0,dangerMode:!0,icon:"warning",text:"Are you sure? This user's next payment will be due in 1 month.",title:"Uncomp user?"}).then(function(n){n&&(t.error=null,s.a.uncompUser({id:e}).then(function(){t.getCompUsers()},function(e){t.error=e}))})}}}},xJIA:function(e,t,n){"use strict";var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"stat"},[null!=e.overages?n("div",[n("p",[e._v("Premium Overages: "+e._s(e.overages.premiums.length))]),e._v(" "),n("p",[e._v("Gold Overages: "+e._s(e.overages.golds.length))]),e._v(" "),e.overages.premiums.length?n("p",[n("strong",[e._v("Premium users over 20MB")])]):e._e(),e._v(" "),e._l(e.overages.premiums,function(t){return n("div",{key:t.id},[n("p",[e._v("\n        email: "+e._s(t.email)+" | id: "+e._s(t.id)+" | space: "+e._s(t.space_used)+"\n      ")])])}),e._v(" "),e.overages.golds.length?n("p",[n("strong",[e._v("Gold users over 250MB")])]):e._e(),e._v(" "),e._l(e.overages.golds,function(t){return n("div",{key:t.id},[n("p",[e._v("\n        email: "+e._s(t.email)+" | id: "+e._s(t.id)+" | space: "+e._s(t.space_used)+"\n      ")])])})],2):e._e(),e._v(" "),e.error?n("div",{staticClass:"error",domProps:{textContent:e._s(e.error)}}):e._e()])},r=[],i={render:s,staticRenderFns:r};t.a=i},xUE3:function(e,t){},z9ju:function(e,t,n){"use strict";var s=n("7+uW"),r=n("/ocq"),i=n("QW4H"),a=n("9TLP");s.a.use(r.a),t.a=new r.a({routes:[{path:"/",redirect:"/overview"},{path:"/overview",name:"Overview",component:i.a},{path:"/send-email/:id",name:"Send Email",component:a.a}]})}},["qczc"]);
//# sourceMappingURL=admin.3f1c9e6cf29b7288bfef.js.map