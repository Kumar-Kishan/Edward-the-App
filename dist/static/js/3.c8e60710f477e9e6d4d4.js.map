{"version":3,"sources":["webpack:///./src/app/analyser/commonWords.analysis.js","webpack:///./src/app/analyser/wordOverTime.analysis.js","webpack:///./src/app/analyser/analyses.js","webpack:///src/app/analyser/analyser.page.vue","webpack:///./src/app/analyser/analyser.page.vue","webpack:///./src/app/analyser/analyser.page.vue?b1db","webpack:///./src/app/analyser/analyser.page.vue?66ae","webpack:///./src/app/analyser/analyser.page.vue?50b9"],"names":["commonWords_analysis_ignoredWords","split","map","str","toLowerCase","commonWords_analysis","_ref","chapters","_ref2","svg","g","maxHeight","maxWidth","wordArray","concat","apply","toConsumableArray_default","chapter","Object","deltaParser","content","word","filter","includes","wordDict","flow_default","groupBy_default","frequencies","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","get_iterator_default","keys_default","next","done","key","value","hasOwnProperty","push","frequency","length","err","return","orderedFrequencies","orderBy_default","obj","take_default","Error","margin","attr","barHeight","barInnerHeight","barPadding","x","d3","domain","rangeRound","bar","selectAll","data","enter","append","d","i","text","wordOverTime_analysis","wordArg","Word","chapterResults","title","result","Math","max","y","call","tickFormat","substring","tickValues","range_default","line","index","datum","analyses_clearPrevious","el","innerHTML","analyses_makeSvg","offsetWidth","style","analyses_safelyRunAnalysis","analysisFn","args","onError","e","sweetalert_min_default","icon","analyses","description","inputs","run","resultsWindow","unarchivedChapters","archived","analyses_validateArgs","this","analysis","analyser_page","currentAnalysis","Analyses","tooltip","input","analyser_page_vue_styles_","context","__webpack_require__","analyser_page_Component","component_normalizer","_vm","_h","$createElement","_c","_self","staticClass","_v","_l","directives","name","rawName","attrs","on","click","$event","selectAnalysis","_s","for","getInputId","expression","id","domProps","target","composing","$set","_e","runAnalysis","ref","__webpack_exports__","module","exports","version","sources","names","mappings","file","sourcesContent","sourceRoot","locals","add","default"],"mappings":"mRAOMA,EAAe,4jBAkBlBC,MAAM,MAAMC,IAAI,SAAAC,GAAA,OAAOA,EAAIC,gBAoE9BC,EAlEoB,SAAAC,EAAkCC,GAAa,IAAAC,EAAzCC,EAAyCH,EAA5CI,EAAQC,EAAoCL,EAApCK,UAAWC,EAAyBN,EAAzBM,SAClCC,GAAYL,MAAGM,OAAHC,MAAAP,EAAAQ,IAAaT,EAASL,IACtC,SAAAe,GAAA,OAAWC,OAAAC,EAAA,EAAAD,CAAaD,EAAQG,SAC7BlB,IAAI,SAAAmB,GAAA,OAAQA,EAAKjB,gBACjBkB,OAAO,SAAAD,GAAA,OAASrB,EAAauB,SAASF,SAGrCG,EAAWC,IACfC,IAAQ,SAAAL,GAAA,OAAQA,IADDI,CAEfZ,GAEIc,KAX2DC,GAAA,EAAAC,GAAA,EAAAC,OAAAC,EAAA,IAYjE,QAAAC,EAAAC,EAAAC,IAAgBC,IAAYX,MAA5BI,GAAAI,EAAAC,EAAAG,QAAAC,MAAAT,GAAA,EAAuC,KAA9BU,EAA8BN,EAAAO,MACrC,IAAKf,EAASgB,eAAeF,GAC3B,OAGFX,EAAYc,MACVC,UAAWlB,EAASc,GAAKK,OACzBtB,KAAMiB,KAnBuD,MAAAM,GAAAf,GAAA,EAAAC,EAAAc,EAAA,aAAAhB,GAAAK,EAAAY,QAAAZ,EAAAY,SAAA,WAAAhB,EAAA,MAAAC,GAuBjE,IAAMgB,EAAqBrB,IACzBsB,KAAS,SAAAC,GAAA,OAAOA,EAAIN,aAAa,SACjCO,IAAK,IAFoBxB,CAGzBE,GAEF,IAAKmB,EAAmBH,OACtB,MAAM,IAAIO,MAAM,yBAGlB,IAAMC,EAAmB,GAAnBA,EAA6B,GAA7BA,EAAsC,GAAtCA,EAAiD,GACjDzC,EAAID,EAAI2C,KAAK,YAAT,aAAmCD,EAAnC,KAAmDA,EAAnD,KAEJE,GAAa1C,EAAYwC,EAAgBA,GAAcL,EAAmBH,OAE1EW,EAAiBD,EAAaE,GAG9BC,EAAIC,EAAA,IACTC,QAAQ,EAAGZ,EAAmB,GAAGJ,YACjCiB,YAAY,EAAG/C,EAAWuC,EAAcA,EAJrB,KAQdS,EAAMlD,EAAEmD,UAAU,KAAKC,KAAKhB,GAAoBiB,QAAQC,OAAO,KAErEJ,EAAII,OAAO,QACVZ,KAAK,IAAK,KAAKA,KAAK,IAbF,GAclBA,KAAK,SAAUE,GACfF,KAAK,QAAS,SAAAa,GAAA,OAAKT,EAAES,EAAEvB,aACvBU,KAAK,OAAQ,WAEdQ,EAAIR,KAAK,YAAa,SAACa,EAAGC,GAAJ,sBAA4BA,EAVvBb,EAUL,MACnBW,OAAO,QACPG,KAAK,SAAAF,GAAA,OAAKA,EAAE5C,OACZ+B,KAAK,YAAa,MAClBA,KAAK,IAAK,KAAKA,KAAK,IAJvB,GAI+BE,GAE/BM,EAAII,OAAO,QACRG,KAAK,SAAAF,GAAA,OAAKA,EAAEvB,YACZU,KAAK,YAAa,MAClBA,KAAK,IAAK,SAAAa,GAAA,OAAKT,EAAES,EAAEvB,WAAa,IAAGU,KAAK,IAH3C,GAGmDE,8CCVrD,IAAAc,EA5EqB,SAAA9D,EAAkCC,EAAlCC,GAAkE,IAA5DC,EAA4DH,EAA/DI,EAAQE,EAAuDN,EAAvDM,SAAUD,EAA6CL,EAA7CK,UAA+B0D,EAAc7D,EAApB8D,KAC3DC,KAD+E3C,GAAA,EAAAC,GAAA,EAAAC,OAAAC,EAAA,IAGrF,QAAAC,EAAAC,EAAAC,IAAsB3B,KAAtBqB,GAAAI,EAAAC,EAAAG,QAAAC,MAAAT,GAAA,EAAgC,KAArBX,EAAqBe,EAAAO,MAExBG,EADQxB,OAAAC,EAAA,EAAAD,CAAaD,EAAQG,SACXE,OAAO,SAAAD,GAAA,OAAQA,EAAKjB,gBAAkBiE,EAAQjE,gBAAeuC,OACrF4B,EAAe9B,MACbC,YACA8B,MAAOvD,EAAQuD,SARkE,MAAA5B,GAAAf,GAAA,EAAAC,EAAAc,EAAA,aAAAhB,GAAAK,EAAAY,QAAAZ,EAAAY,SAAA,WAAAhB,EAAA,MAAAC,GAYrF,IAAMH,EAAc4C,EAAerE,IAAI,SAAAuE,GAAA,OAAUA,EAAO/B,YAElDgB,GAAU,EAAGgB,KAAKC,IAAL5D,MAAA2D,KAAA1D,IAAYW,KACzBwB,EAAmB,GAAnBA,EAA6B,GAA7BA,EAAsC,GAAtCA,EAAiD,GAGjDzC,EAAID,EAAI2C,KAAK,YAAT,aAAmCD,EAAnC,KAAmDA,EAAnD,KAEJK,EAAIC,EAAA,IACPC,QAAQ,EAAGa,EAAe5B,SAC1BgB,YAAY,EAAG/C,EAAWuC,EAAcA,IAErCyB,EAAInB,EAAA,IACPC,OAAOA,GACPC,YAAYhD,EAAYwC,EAAgBA,EAAY,IAEvDzC,EAAEsD,OAAO,KACNZ,KAAK,YADR,iBACqCzC,EAAYwC,EAAgBA,GADjE,KAEG0B,KACCpB,EAAA,EAAcD,GACXsB,WAAW,SAAAZ,GAAA,OAoCD/D,EApCeoE,EAAeL,EAAI,GAAGM,MAoChC7B,EApCuC,GAqCzDxC,EAAIwC,OAASA,EACRxC,EAGCA,EAAI4E,UAAU,EAAGpC,GAA3B,MALF,IAAmBxC,EAAKwC,IAnCfqC,WAAWC,IAAM,EAAGV,EAAe5B,OAAS,KAEhDkB,UAAU,QACVT,KAAK,YAAa,cAErB1C,EAAEsD,OAAO,KACNZ,KAAK,YADR,mBAEGyB,KAAKpB,EAAA,EAAYmB,IAEpB,IAAMM,EAAOzB,EAAA,IACVD,EAAE,SAACS,EAAGkB,GAAJ,OAAc3B,EAAE2B,EAAQ,KAC1BP,EAAE,SAAAX,GAAA,OAAKW,EAAEX,EAAEvB,aAEdhC,EAAEsD,OAAO,QACNoB,MAAMb,GACNnB,KAAK,OAAQ,QACbA,KAAK,SAAU,WACfA,KAAK,kBAAmB,SACxBA,KAAK,iBAAkB,SACvBA,KAAK,eAAgB,KACrBA,KAAK,IAAK8B,GAEbxE,EAAEsD,OAAO,QACNZ,KAAK,IAAK,KAAKA,KAAK,IAAK,MACzBA,KAAK,SAAU,MACfA,KAAK,QAAS,MACdA,KAAK,OAAQ,4BAEhB1C,EAAEsD,OAAO,QACNZ,KAAK,YAAa,MAClBA,KAAK,IAAK,MACVA,KAAK,IAAK,KACVe,KAAK,gBCvDJkB,EAAgB,SAACC,GACrBA,EAAGC,UAAY,IAGXC,EAAU,SAACF,GACf,IACM1E,EAAW0E,EAAGG,YAQpB,OAAS/E,EAPC+C,EAAA,EAAU6B,GACjBtB,OAAO,OACP0B,MAAM,mBAAoB,QAC1BtC,KAAK,SALU,KAMfA,KAAK,QAASxC,GACdoD,OAAO,KAEErD,UATM,IASKC,aAGnB+E,EAAoB,SAACC,EAAYC,EAAMC,GAC3C,IACEF,eAAA5E,IAAc6E,IACd,MAAOE,GACPC,KACEC,KAAM,QACN9B,KAAM4B,IAERD,MA+DJI,IA7CEC,qGAEAC,OAAQ,KACRC,IAJoB,SAIfC,EAJehG,GAIc,IAAZC,EAAYD,EAAZC,SACpB8E,EAAciB,GAEd,IAAMC,EAAqBhG,EAASe,OAAO,SAAAL,GAAA,OAAYA,EAAQuF,YAAcvF,EAAQG,UAErFuE,EACEtF,GACCmF,EAAQc,GAAgBC,GACzB,kBAAMlB,EAAciB,MAGxB9B,MAAO,sBAIP2B,YAAa,sDACbC,QAAS,QACTC,IAHmB,SAGdC,EAHc9F,EAGeqF,GAAM,IAAlBtF,EAAkBC,EAAlBD,SACpB,GAnCiB,SAAC6F,EAAQP,GAAS,IAAAjE,GAAA,EAAAC,GAAA,EAAAC,OAAAC,EAAA,IACrC,QAAAC,EAAAC,EAAAC,IAAoBkE,KAApBxE,GAAAI,EAAAC,EAAAG,QAAAC,MAAAT,GAAA,EACE,IAAKiE,EADqB7D,EAAAO,OAMxB,OAJAyD,KACEC,KAAM,QACN9B,8CAEK,EAP0B,MAAAvB,GAAAf,GAAA,EAAAC,EAAAc,EAAA,aAAAhB,GAAAK,EAAAY,QAAAZ,EAAAY,SAAA,WAAAhB,EAAA,MAAAC,GAUrC,OAAO,EAyBA2E,CAAaC,KAAKN,OAAQP,GAA/B,CAGAR,EAAciB,GAEd,IAAMC,EAAqBhG,EAASe,OAAO,SAAAL,GAAA,OAAYA,EAAQuF,YAAcvF,EAAQG,UAErFuE,EACEvB,GACCoB,EAAQc,GAAgBC,EAAoBV,GAC7C,kBAAMR,EAAciB,OAGxB9B,MAAO,mBAMPtE,IAAI,SAAAyG,GAEJ,OADAA,EAASd,QACFc,IClETC,0DAIArG,4CAGAsG,iBAAAH,KAAAG,gBACAT,QAAAM,KAAAG,gBAAAT,OACAzD,gCAKAmE,SAAAZ,kBAEA,mBAIAa,kBAAA,kDAGAC,oEAGAnB,uDAGAc,iBCrDA,IAEAM,EAXA,SAAAC,GACAC,EAAA,SAgBAC,EAAAlG,OAAAmG,EAAA,EAAAnG,CACA0F,EClBA,WAA0B,IAAAU,EAAAZ,KAAaa,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,kBAA4BF,EAAA,OAAYE,YAAA,aAAuBF,EAAA,OAAYE,YAAA,aAAuBF,EAAA,MAAWE,YAAA,mBAA6BL,EAAAM,GAAA,2CAAAN,EAAAM,GAAA,KAAAN,EAAAO,GAAAP,EAAA,kBAAAX,EAAAxB,GAA+G,OAAAsC,EAAA,UAAoBK,aAAaC,KAAA,UAAAC,QAAA,cAAmC1F,IAAA6C,EAAAwC,YAAA,kBAAAM,OAAiDzD,MAAAmC,EAAAR,aAA6B+B,IAAKC,MAAA,SAAAC,GAAyBd,EAAAe,eAAA1B,OAA+BW,EAAAM,GAAA,aAAAN,EAAAgB,GAAA3B,EAAAnC,OAAA,iBAA2D,GAAA8C,EAAAM,GAAA,KAAAN,EAAA,gBAAAG,EAAA,OAAkDE,YAAA,oBAA8BL,EAAA,YAAAG,EAAA,MAA6BE,YAAA,mBAA6BL,EAAAM,GAAA,iDAAAN,EAAAM,GAAA,KAAAN,EAAAO,GAAAP,EAAAT,gBAAA,gBAAAG,EAAA7B,GAAgI,OAAAsC,EAAA,OAAiBnF,IAAA6C,EAAAwC,YAAA,mBAAuCF,EAAA,SAAcQ,OAAOM,IAAAjB,EAAAkB,WAAAxB,MAA6BM,EAAAM,GAAAN,EAAAgB,GAAAtB,MAAAM,EAAAM,GAAA,KAAAH,EAAA,SAAkDK,aAAaC,KAAA,QAAAC,QAAA,UAAAzF,MAAA+E,EAAAT,gBAAAhB,KAAAmB,GAAAyB,WAAA,gCAAgHR,OAASS,GAAApB,EAAAkB,WAAAxB,IAA2B2B,UAAWpG,MAAA+E,EAAAT,gBAAAhB,KAAAmB,IAA0CkB,IAAKlB,MAAA,SAAAoB,GAAyBA,EAAAQ,OAAAC,WAAsCvB,EAAAwB,KAAAxB,EAAAT,gBAAAhB,KAAAmB,EAAAoB,EAAAQ,OAAArG,gBAAqE+E,EAAAyB,KAAAzB,EAAAM,GAAA,KAAAH,EAAA,UAAqCE,YAAA,+BAAAO,IAA+CC,MAAA,SAAAC,GAAyBd,EAAA0B,YAAA1B,EAAAT,qBAAuCS,EAAAM,GAAA,0BAAAN,EAAAyB,KAAAzB,EAAAM,GAAA,KAAAH,EAAA,OAAkEwB,IAAA,UAAAtB,YAAA,qBDSxkD,EAaAV,EATA,kBAEA,MAYAiC,EAAA,QAAA9B,EAAA,+BE3BA+B,EAAAC,QAAAjC,EAAA,OAAAA,EAAA,IAKA1E,MAAA0G,EAAAjF,EAAA,iaAAwb,IAAQmF,QAAA,EAAAC,SAAA,6DAAAC,SAAAC,SAAA,yPAAAC,KAAA,oBAAAC,gBAAA,4kBAAq9BC,WAAA,4BCFr5C,IAAAvI,EAAA+F,EAAA,QACA,iBAAA/F,QAAA+H,EAAAjF,EAAA9C,EAAA,MACAA,EAAAwI,SAAAT,EAAAC,QAAAhI,EAAAwI,SAGAC,EADA1C,EAAA,QAAA2C,SACA,WAAA1I,GAAA","file":"static/js/3.c8e60710f477e9e6d4d4.js","sourcesContent":["import flow from 'lodash/fp/flow'\r\nimport groupBy from 'lodash/fp/groupBy'\r\nimport orderBy from 'lodash/fp/orderBy'\r\nimport take from 'lodash/fp/take'\r\nimport * as d3 from 'd3'\r\nimport { GetWordArray } from '../shared/deltaParser'\r\n\r\nconst ignoredWords = `\r\n  the a an\r\n  and but not or\r\n  I me we us you she her he him they them it\r\n  I've I'll I'd we've we'll we'd you've you'll you'd\r\n  she's she'll she'd he's he'll he'd they've they'll they'd\r\n  it's it'll it'd\r\n  I'm you're they're\r\n  myself ourself ourselves yourself yourselves\r\n  herself himself theirself theirselves themselves\r\n  my mine our ours your yours hers his their theirs its\r\n  to from of in for as with so at by on\r\n  be being is was were would will\r\n  do doing did done go going went\r\n  have having had\r\n  that those this these\r\n  not\r\n  what who which`\r\n  .split(/\\s/).map(str => str.toLowerCase())\r\n\r\nconst CommonWords = ({ g: svg, maxHeight, maxWidth }, chapters) => {\r\n  const wordArray = [].concat(...chapters.map(\r\n    chapter => GetWordArray(chapter.content)\r\n      .map(word => word.toLowerCase())\r\n      .filter(word => !ignoredWords.includes(word))\r\n  ))\r\n\r\n  const wordDict = flow(\r\n    groupBy(word => word)\r\n  )(wordArray)\r\n\r\n  const frequencies = []\r\n  for (var key of Object.keys(wordDict)) {\r\n    if (!wordDict.hasOwnProperty(key)) {\r\n      return\r\n    }\r\n\r\n    frequencies.push({\r\n      frequency: wordDict[key].length,\r\n      word: key\r\n    })\r\n  }\r\n\r\n  const orderedFrequencies = flow(\r\n    orderBy([obj => obj.frequency], ['desc']),\r\n    take(10)\r\n  )(frequencies)\r\n\r\n  if (!orderedFrequencies.length) {\r\n    throw new Error('No content was found.')\r\n  }\r\n\r\n  const margin = { bottom: 20, left: 20, top: 20, right: 20 }\r\n  const g = svg.attr('transform', `translate(${margin.left}, ${margin.top})`)\r\n\r\n  const barHeight = (maxHeight - margin.bottom - margin.top) / orderedFrequencies.length\r\n  const barPadding = 6\r\n  const barInnerHeight = barHeight - (barPadding * 2)\r\n  const barRightPad = 50\r\n\r\n  const x = d3.scaleLinear()\r\n  .domain([0, orderedFrequencies[0].frequency])\r\n  .rangeRound([0, maxWidth - margin.left - margin.right - barRightPad])\r\n\r\n  const y = index => index * barHeight\r\n\r\n  const bar = g.selectAll('g').data(orderedFrequencies).enter().append('g')\r\n\r\n  bar.append('rect')\r\n  .attr('x', '0').attr('y', barPadding)\r\n  .attr('height', barInnerHeight)\r\n  .attr('width', d => x(d.frequency))\r\n  .attr('fill', '#90caf9')\r\n\r\n  bar.attr('transform', (d, i) => `translate(0, ${y(i)})`)\r\n    .append('text')\r\n    .text(d => d.word)\r\n    .attr('font-size', '14')\r\n    .attr('x', '5').attr('y', `${barInnerHeight}`)\r\n\r\n  bar.append('text')\r\n    .text(d => d.frequency)\r\n    .attr('font-size', '14')\r\n    .attr('x', d => x(d.frequency) + 6).attr('y', `${barInnerHeight}`)\r\n}\r\n\r\nexport default CommonWords\r\n","import * as d3 from 'd3'\r\nimport { GetWordArray } from '../shared/deltaParser'\r\nimport range from 'lodash/range'\r\n\r\nconst WordOverTime = ({ g: svg, maxWidth, maxHeight }, chapters, { Word: wordArg }) => {\r\n  const chapterResults = []\r\n\r\n  for (const chapter of chapters) {\r\n    const words = GetWordArray(chapter.content)\r\n    const frequency = words.filter(word => word.toLowerCase() === wordArg.toLowerCase()).length\r\n    chapterResults.push({\r\n      frequency,\r\n      title: chapter.title\r\n    })\r\n  }\r\n\r\n  const frequencies = chapterResults.map(result => result.frequency)\r\n\r\n  const domain = [0, Math.max(...frequencies)]\r\n  const margin = { bottom: 40, left: 30, top: 20, right: 50 }\r\n\r\n  // Create svg and g and position with a margin\r\n  const g = svg.attr('transform', `translate(${margin.left}, ${margin.top})`)\r\n\r\n  const x = d3.scaleLinear()\r\n    .domain([1, chapterResults.length])\r\n    .rangeRound([0, maxWidth - margin.left - margin.right])\r\n\r\n  const y = d3.scaleLinear()\r\n    .domain(domain)\r\n    .rangeRound([maxHeight - margin.bottom - margin.top, 0])\r\n\r\n  g.append('g')\r\n    .attr('transform', `translate(0, ${maxHeight - margin.bottom - margin.top})`)\r\n    .call(\r\n      d3.axisBottom(x)\r\n        .tickFormat(i => truncate(chapterResults[i - 1].title, 20))\r\n        .tickValues(range(1, chapterResults.length + 1))\r\n    )\r\n    .selectAll('text')\r\n    .attr('transform', 'rotate(-8)')\r\n\r\n  g.append('g')\r\n    .attr('transform', `translate(0, 0)`)\r\n    .call(d3.axisLeft(y))\r\n\r\n  const line = d3.line()\r\n    .x((d, index) => x(index + 1))\r\n    .y(d => y(d.frequency))\r\n\r\n  g.append('path')\r\n    .datum(chapterResults)\r\n    .attr('fill', 'none')\r\n    .attr('stroke', '#0d47a1')\r\n    .attr('stroke-linejoin', 'bevel')\r\n    .attr('stroke-linecap', 'round')\r\n    .attr('stroke-width', '2')\r\n    .attr('d', line)\r\n\r\n  g.append('rect')\r\n    .attr('x', '5').attr('y', '-9')\r\n    .attr('height', '22')\r\n    .attr('width', '67')\r\n    .attr('fill', 'rgba(230, 230, 230, 0.8)')\r\n\r\n  g.append('text')\r\n    .attr('font-size', '12')\r\n    .attr('x', '10')\r\n    .attr('y', '5')\r\n    .text('Occurrences')\r\n}\r\n\r\nfunction truncate (str, length) {\r\n  if (str.length < length) {\r\n    return str\r\n  }\r\n\r\n  return `${str.substring(0, length)}...`\r\n}\r\n\r\nexport default WordOverTime\r\n","/*\r\nAnalysis: {\r\n  description String,\r\n  inputs String[],\r\n  run (resultsWindow HTMLElement, document Delta, args Object),\r\n  title String\r\n}\r\n*/\r\n\r\nimport CommonWords from './commonWords.analysis'\r\nimport * as d3 from 'd3'\r\nimport swal from 'sweetalert'\r\nimport WordOverTime from './wordOverTime.analysis'\r\n\r\nconst clearPrevious = (el) => {\r\n  el.innerHTML = ''\r\n}\r\n\r\nconst makeSvg = (el) => {\r\n  const maxHeight = 400\r\n  const maxWidth = el.offsetWidth\r\n  const g = d3.select(el)\r\n    .append('svg')\r\n    .style('background-color', '#FFF')\r\n    .attr('height', maxHeight)\r\n    .attr('width', maxWidth)\r\n    .append('g')\r\n\r\n  return { g, maxHeight, maxWidth }\r\n}\r\n\r\nconst safelyRunAnalysis = (analysisFn, args, onError) => {\r\n  try {\r\n    analysisFn(...args)\r\n  } catch (e) {\r\n    swal({\r\n      icon: 'error',\r\n      text: e\r\n    })\r\n    onError()\r\n  }\r\n}\r\n\r\nconst validateArgs = (inputs, args) => {\r\n  for (const input of inputs) {\r\n    if (!args[input]) {\r\n      swal({\r\n        icon: 'error',\r\n        text: `Please fill in all required inputs.`\r\n      })\r\n      return false\r\n    }\r\n  }\r\n  return true\r\n}\r\n\r\nconst wordFrequency = {\r\n  description:\r\n    `Find your top 10 most frequently used words (ignoring common English words like \"the\")`,\r\n  inputs: null,\r\n  run (resultsWindow, { chapters }) {\r\n    clearPrevious(resultsWindow)\r\n\r\n    const unarchivedChapters = chapters.filter(chapter => !chapter.archived && !!chapter.content)\r\n\r\n    safelyRunAnalysis(\r\n      CommonWords,\r\n      [makeSvg(resultsWindow), unarchivedChapters],\r\n      () => clearPrevious(resultsWindow)\r\n    )\r\n  },\r\n  title: 'Most common words'\r\n}\r\n\r\nconst wordOverTime = {\r\n  description: 'Track your usage of a specific word in each chapter',\r\n  inputs: ['Word'],\r\n  run (resultsWindow, { chapters }, args) {\r\n    if (!validateArgs(this.inputs, args)) {\r\n      return\r\n    }\r\n    clearPrevious(resultsWindow)\r\n\r\n    const unarchivedChapters = chapters.filter(chapter => !chapter.archived && !!chapter.content)\r\n\r\n    safelyRunAnalysis(\r\n      WordOverTime,\r\n      [makeSvg(resultsWindow), unarchivedChapters, args],\r\n      () => clearPrevious(resultsWindow)\r\n    )\r\n  },\r\n  title: 'Word over time'\r\n}\r\n\r\nconst all = [\r\n  wordFrequency,\r\n  wordOverTime\r\n].map(analysis => {\r\n  analysis.args = {}\r\n  return analysis\r\n})\r\n\r\nexport default all\r\n","<template>\r\n  <div class=\"analyser-wrap\">\r\n    <div class=\"analyser\">\r\n      <div class=\"analyses\">\r\n        <h4 class=\"analysis-title\">\r\n          Select an analysis:\r\n        </h4>\r\n        <button class=\"analysis-button\" v-for=\"(analysis, index) in Analyses\" :key=\"index\"\r\n                @click=\"selectAnalysis(analysis)\" :title=\"analysis.description\" v-tooltip>\r\n          {{ analysis.title }}\r\n        </button>\r\n      </div>\r\n      <div class=\"analysis-inputs\" v-if=\"currentAnalysis\">\r\n        <template v-if=\"showInputs\">\r\n          <h4 class=\"analysis-title\">\r\n            Enter desired inputs:\r\n          </h4>\r\n          <div class=\"analysis-input\" v-for=\"(input, index) in currentAnalysis.inputs\" :key=\"index\">\r\n            <label :for=\"getInputId(input)\">{{ input }}</label>\r\n            <input :id=\"getInputId(input)\" v-model=\"currentAnalysis.args[input]\">\r\n          </div>\r\n        </template>\r\n        <button class=\"analysis-button button-green\" @click=\"runAnalysis(currentAnalysis)\">Run the analysis</button>\r\n      </div>\r\n      <div class=\"results\" ref=\"results\"></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Analyses from './analyses'\r\nimport tooltip from '../shared/tooltip.directive'\r\n\r\nexport default {\r\n  computed: {\r\n    document () {\r\n      return this.$store.state.chapters\r\n    },\r\n    showInputs () {\r\n      return (this.currentAnalysis &&\r\n             this.currentAnalysis.inputs &&\r\n             this.currentAnalysis.inputs.length)\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      Analyses,\r\n      currentAnalysis: null\r\n    }\r\n  },\r\n  directives: {\r\n    tooltip\r\n  },\r\n  methods: {\r\n    getInputId (input) {\r\n      return `input-${input}`\r\n    },\r\n    runAnalysis (analysis) {\r\n      analysis.run(this.$refs.results, this.document, analysis.args)\r\n    },\r\n    selectAnalysis (analysis) {\r\n      this.currentAnalysis = analysis\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.analyser-wrap {\r\n  display: flex;\r\n  justify-content: center;\r\n  width: 100%;\r\n}\r\n\r\n.analyser {\r\n  display: block;\r\n  flex: 1;\r\n  max-width: 1050px;\r\n}\r\n\r\n.analyses {\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.analysis-button {\r\n  margin-right: 6px;\r\n  margin-top: 12px;\r\n}\r\n\r\n.results {\r\n  margin-top: 12px;\r\n}\r\n</style>\r\n","function injectStyle (context) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6c39893f\\\",\\\"scoped\\\":true,\\\"sourceMap\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./analyser.page.vue\")\n}\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./analyser.page.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./analyser.page.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6c39893f\\\",\\\"hasScoped\\\":true,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./analyser.page.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-6c39893f\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"analyser-wrap\"},[_c('div',{staticClass:\"analyser\"},[_c('div',{staticClass:\"analyses\"},[_c('h4',{staticClass:\"analysis-title\"},[_vm._v(\"\\n        Select an analysis:\\n      \")]),_vm._v(\" \"),_vm._l((_vm.Analyses),function(analysis,index){return _c('button',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\"}],key:index,staticClass:\"analysis-button\",attrs:{\"title\":analysis.description},on:{\"click\":function($event){_vm.selectAnalysis(analysis)}}},[_vm._v(\"\\n        \"+_vm._s(analysis.title)+\"\\n      \")])})],2),_vm._v(\" \"),(_vm.currentAnalysis)?_c('div',{staticClass:\"analysis-inputs\"},[(_vm.showInputs)?[_c('h4',{staticClass:\"analysis-title\"},[_vm._v(\"\\n          Enter desired inputs:\\n        \")]),_vm._v(\" \"),_vm._l((_vm.currentAnalysis.inputs),function(input,index){return _c('div',{key:index,staticClass:\"analysis-input\"},[_c('label',{attrs:{\"for\":_vm.getInputId(input)}},[_vm._v(_vm._s(input))]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.currentAnalysis.args[input]),expression:\"currentAnalysis.args[input]\"}],attrs:{\"id\":_vm.getInputId(input)},domProps:{\"value\":(_vm.currentAnalysis.args[input])},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.currentAnalysis.args, input, $event.target.value)}}})])})]:_vm._e(),_vm._v(\" \"),_c('button',{staticClass:\"analysis-button button-green\",on:{\"click\":function($event){_vm.runAnalysis(_vm.currentAnalysis)}}},[_vm._v(\"Run the analysis\")])],2):_vm._e(),_vm._v(\" \"),_c('div',{ref:\"results\",staticClass:\"results\"})])])}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".analyser-wrap[data-v-6c39893f]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:100%}.analyser[data-v-6c39893f]{display:block;-webkit-box-flex:1;-ms-flex:1;flex:1;max-width:1050px}.analyses[data-v-6c39893f]{margin-bottom:10px}.analysis-button[data-v-6c39893f]{margin-right:6px;margin-top:12px}.results[data-v-6c39893f]{margin-top:12px}\", \"\", {\"version\":3,\"sources\":[\"C:/code/Edward-the-App/src/app/analyser/analyser.page.vue\"],\"names\":[],\"mappings\":\"AACA,gCACE,oBAAqB,AACrB,oBAAqB,AACrB,aAAc,AACd,wBAAyB,AACrB,qBAAsB,AAClB,uBAAwB,AAChC,UAAY,CACb,AACD,2BACE,cAAe,AACf,mBAAoB,AAChB,WAAY,AACR,OAAQ,AAChB,gBAAkB,CACnB,AACD,2BACE,kBAAoB,CACrB,AACD,kCACE,iBAAkB,AAClB,eAAiB,CAClB,AACD,0BACE,eAAiB,CAClB\",\"file\":\"analyser.page.vue\",\"sourcesContent\":[\"\\n.analyser-wrap[data-v-6c39893f] {\\r\\n  display: -webkit-box;\\r\\n  display: -ms-flexbox;\\r\\n  display: flex;\\r\\n  -webkit-box-pack: center;\\r\\n      -ms-flex-pack: center;\\r\\n          justify-content: center;\\r\\n  width: 100%;\\n}\\n.analyser[data-v-6c39893f] {\\r\\n  display: block;\\r\\n  -webkit-box-flex: 1;\\r\\n      -ms-flex: 1;\\r\\n          flex: 1;\\r\\n  max-width: 1050px;\\n}\\n.analyses[data-v-6c39893f] {\\r\\n  margin-bottom: 10px;\\n}\\n.analysis-button[data-v-6c39893f] {\\r\\n  margin-right: 6px;\\r\\n  margin-top: 12px;\\n}\\n.results[data-v-6c39893f] {\\r\\n  margin-top: 12px;\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6c39893f\\\",\\\"scoped\\\":true,\\\"sourceMap\\\":false}!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./analyser.page.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"03de765f\", content, true, {});"],"sourceRoot":""}