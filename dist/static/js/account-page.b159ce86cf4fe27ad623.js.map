{"version":3,"sources":["webpack:///src/auth/account.page.vue","webpack:///./src/auth/account.page.vue?4d8f","webpack:///./src/app/api/localStorage.js","webpack:///./utilities.js","webpack:///./src/auth/account.page.vue","webpack:///./src/app/api/api.js","webpack:///./static/icon-small.png"],"names":["__webpack_require__","_shared","storage","_localStorage2","default","accountPayments","_accountPayments","_defineProperty3","_accountType2","LIMITED","name","display","amount","PREMIUM","GOLD","created","this","user","accountType","DEMO","$router","push","components","PulseLoader","_PulseLoader2","computed","displayName","isGold","isOverdue","isPremium","paymentDueDate","paymentDue","Date","toLocaleDateString","$route","matched","find","record","meta","getCurrentUser","data","error","payment","saving","methods","cancel","goToApp","limitedToPremium","_this","open","email","description","token","_token","_authApi2","upgrade","oldAccountType","newAccountType","then","getFullExport","exported","_api2","fullImport","showSuccessPage","err","console","limitedToGold","_this2","_token2","toGold","userType","premiumToGold","_this3","_token3","paidToLimited","_this4","_sweetalert2","buttons","dangerMode","icon","text","title","willDowngrade","fullExport","doFullImport","goldToPremium","_this5","_token4","updatePayment","_this6","paymentData","_token5","mounted","window","StripeCheckout","configure","key","stripePublicKey","image","_iconSmall2","color","locale","zipCode","allowRememberMe","destroyed","close","d","__webpack_exports__","staticRenderFns","render","_vm","_h","$createElement","_c","_self","staticClass","_v","_s","_e","on","click","$event","attrs","href","to","disabled","_utilities","LocalStorageApi","username","_classCallCheck3","localForage","setDriver","INDEXEDDB","WEBSQL","LOCALSTORAGE","_storage","getStorageKeys","keys","planKeyPrefix","documentGuid","planOrderKey","getPlanKey","planGuid","sectionKeyPrefix","sectionOrderKey","getSectionKey","sectionGuid","chapterKeyPrefix","chapterOrderKey","getChapterKey","chapterGuid","topicKeyPrefix","topicOrderKey","getTopicKey","topicGuid","legacyDocumentGuids","documentGuidsKey","documentsKey","guid","_ref","_getAllDocumentGuids","documentGuids","includes","setItem","chapterGuids","planGuids","sectionGuids","topicGuids","removeItem","splice","indexOf","_promise2","all","_getAllChapters","chapters","map","chapter","deleteChapter","_getAllPlans","plans","plan","_getAllSections","sections","section","deleteSection","deletePlan","_getAllTopics","topics","topic","deleteTopic","workshopGuid","Error","prefix","_getChaptersSortOrder","filter","startsWith","_ref2","_ref3","_slicedToArray3","sortOrder","getItem","sort","chap1","chap2","_ref4","_ref5","legacyGuids","guids","Array","isArray","allGuids","_uniq2","concat","_getAllDocuments","_this7","_getPlansSortOrder","_ref6","_ref7","plan1","plan2","_this8","_getSectionSortOrder","_ref8","_ref9","section1","section2","_this9","_getTopicsSortOrder","_ref10","_ref11","topic1","topic2","_this10","_ref12","updateTopicFns","updateTopic","updateChapterPromise","orderPromises","updateChapterFns","updateChapter","updatePlanFns","updatePlan","updateSectionFns","updateSection","updatePlanPromise","_this11","arguments","length","undefined","arrangeChapters","_ref13","_this12","_clone2","arrangePlans","_this13","arrangeSections","_this14","arrangeTopics","workshops","_this15","_ref14","_ref15","doc","_this16","backup","docExport","_backup","deleteDocument","addDocument","saveAllContent","_this17","documents","_ref16","_ref17","_this18","_keys2","importErr","_this19","iterate","value","clear","addDocumentPromises","revertImport","getNewSegment","style","listMap","bullet","ordered","getStyles","attributes","styles","lineStyles","attr","module","exports","getStyledArrayFromChapters","splitContent","pageBreak","currentLine","ops","content","op","insert","first","lines","split","segment","ix","promiseFns","TypeError","JSON","stringify","Promise","resolve","promise","slice","_node_modules_vue_loader_lib_runtime_component_normalizer__WEBPACK_IMPORTED_MODULE_2__","__vue_styles__","context","Component","Object","_babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_account_page_vue__WEBPACK_IMPORTED_MODULE_0___default","a","_node_modules_vue_loader_lib_template_compiler_index_id_data_v_4b625da0_hasScoped_true_optionsId_0_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_account_page_vue__WEBPACK_IMPORTED_MODULE_1__","axios","axiosBase","create","headers","Pragma","Cache-Control","route","_route","Api","get","response","body","post","simpleGet","simplePost","includeArchived"],"mappings":"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","file":"static/js/account-page.b159ce86cf4fe27ad623.js","sourcesContent":["<template>\r\n  <div class=\"wrap\">\r\n    <div class=\"account\">\r\n      <h1 class=\"type\">You have a {{accountType}}.</h1>\r\n      <h4 class=\"thanks\" v-if=\"isPremium\">Thanks for supporting Edward!</h4>\r\n    </div>\r\n    <hr v-if=\"isPremium\">\r\n    <div class=\"payment\" v-if=\"isPremium\">\r\n      <p v-if=\"!isOverdue && paymentDueDate\">Your next payment is due on {{paymentDueDate}}.</p>\r\n      <p class=\"error\" v-if=\"isOverdue\">\r\n        Your account is overdue. You cannot access the app until you downgrade to a Limited account or make a successful payment.\r\n      </p>\r\n      <p>\r\n        Click here to update your payment method.\r\n      </p>\r\n      <button @click=\"updatePayment()\">\r\n        Update Payment Method\r\n      </button>\r\n    </div>\r\n    <hr>\r\n    <div class=\"upgrade\">\r\n      <div v-if=\"isGold\">\r\n        <p class=\"above-small\">\r\n          Don't want your Gold account any more?\r\n        </p>\r\n        <p class=\"small\">\r\n          Please back up all of your documents first.\r\n        </p>\r\n        <button @click=\"goldToPremium()\">\r\n          Revert to Premium\r\n        </button>\r\n      </div>\r\n      <div v-if=\"!isPremium\">\r\n        <p class=\"above-small\">\r\n          Upgrade to a Premium account to access your novels from anywhere.\r\n        </p>\r\n        <p class=\"price\">($2.99 per month, up to 10,000 pages)</p>\r\n        <button class=\"button-green\" @click=\"limitedToPremium()\">\r\n          Go Premium\r\n        </button>\r\n      </div>\r\n      <div v-if=\"!isGold\">\r\n        <p class=\"above-small\">\r\n          Upgrade to a Gold account for extra Premium storage space.\r\n        </p>\r\n        <p class=\"price\">($10 per month, up to 125,000 pages)</p>\r\n        <button class=\"button-gold\" @click=\"toGold()\">\r\n          Go Gold\r\n        </button>\r\n      </div>\r\n      <div v-if=\"isPremium\">\r\n        <p class=\"above-small\">\r\n          Want to downgrade to a Limited account?\r\n        </p>\r\n        <p class=\"small\">\r\n          Please back up all of your documents first. They may not fit in your browser's storage.\r\n        </p>\r\n        <button @click=\"paidToLimited()\">\r\n          Revert to Limited\r\n        </button>\r\n      </div>\r\n      <div class=\"error\" v-if=\"error\">\r\n        There has been a critical error. <strong>Your account change was not successful.</strong>\r\n        Please try again or contact support at <a href=\"mailto:support@edwardtheapp.com\">support@edwardtheapp.com</a>.\r\n      </div>\r\n    </div>\r\n    <hr>\r\n    <div class=\"delete\">\r\n      <router-link to=\"/delete-account\">\r\n        <button class=\"button-link\">Delete my account</button>\r\n      </router-link>\r\n    </div>\r\n    <hr>\r\n    <div class=\"cancel\">\r\n      <pulse-loader v-if=\"saving\"></pulse-loader>\r\n      <button class=\"button-link\" @click=\"cancel()\" :disabled=\"saving\">\r\n        Go back to the app\r\n      </button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport api from '../app/api/api'\r\nimport authApi from './authApi'\r\nimport accountTypes from '../../models/accountType'\r\nimport iconSmall from '../../static/icon-small.png'\r\nimport { goToApp } from './shared'\r\nimport LocalStorageApi from '../app/api/localStorage'\r\nimport PulseLoader from 'vue-spinner/src/PulseLoader.vue'\r\nimport swal from 'sweetalert'\r\nconst storage = new LocalStorageApi()\r\n\r\nconst accountPayments = {\r\n  [accountTypes.LIMITED.name]: { display: 'Edward Limited monthly subscription', amount: 0 },\r\n  [accountTypes.PREMIUM.name]: { display: 'Edward Premium monthly subscription', amount: 299 },\r\n  [accountTypes.GOLD.name]: { display: 'Edward Gold monthly subscription', amount: 1000 }\r\n}\r\n\r\nexport default {\r\n  created () {\r\n    if (!this.user || !this.user.accountType || this.user.accountType.name === accountTypes.DEMO.name) {\r\n      this.$router.push('/login')\r\n      return\r\n    }\r\n  },\r\n  components: {\r\n    PulseLoader\r\n  },\r\n  computed: {\r\n    accountType () {\r\n      return this.user.accountType.displayName\r\n    },\r\n    isGold () {\r\n      return this.user.accountType.name === 'GOLD'\r\n    },\r\n    isOverdue () {\r\n      return this.user.isOverdue\r\n    },\r\n    isPremium () {\r\n      return this.user.isPremium\r\n    },\r\n    paymentDueDate () {\r\n      return this.user.paymentDue ? new Date(this.user.paymentDue).toLocaleDateString() : null\r\n    },\r\n    user () {\r\n      const meta = this.$route.matched.find(record => record && record.meta.getCurrentUser).meta\r\n      return meta.getCurrentUser()\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      error: false,\r\n      payment: null,\r\n      saving: false\r\n    }\r\n  },\r\n  methods: {\r\n    cancel () {\r\n      goToApp()\r\n    },\r\n    limitedToPremium () {\r\n      this.payment.open({\r\n        email: this.user.email,\r\n        description: accountPayments.PREMIUM.display,\r\n        amount: accountPayments.PREMIUM.amount,\r\n        token: token => {\r\n          this.error = false\r\n          this.saving = true\r\n          authApi.upgrade({\r\n            oldAccountType: accountTypes.LIMITED.name,\r\n            newAccountType: accountTypes.PREMIUM.name,\r\n            token\r\n          }).then(() => {\r\n            return storage.getFullExport()\r\n          }).then(exported => {\r\n            return api.fullImport(exported)\r\n          }).then(() => {\r\n            this.error = false\r\n            this.saving = false\r\n            this.showSuccessPage()\r\n          }, err => {\r\n            console.error(err)\r\n            this.error = true\r\n            this.saving = false\r\n          })\r\n        }\r\n      })\r\n    },\r\n    limitedToGold () {\r\n      this.payment.open({\r\n        email: this.user.email,\r\n        description: accountPayments.GOLD.display,\r\n        amount: accountPayments.GOLD.amount,\r\n        token: token => {\r\n          this.error = false\r\n          this.saving = true\r\n          authApi.upgrade({\r\n            oldAccountType: accountTypes.LIMITED.name,\r\n            newAccountType: accountTypes.GOLD.name,\r\n            token\r\n          }).then(() => {\r\n            return storage.getFullExport()\r\n          }).then(exported => {\r\n            return api.fullImport(exported)\r\n          }).then(() => {\r\n            this.error = false\r\n            this.saving = false\r\n            this.showSuccessPage()\r\n          }, err => {\r\n            console.error(err)\r\n            this.error = true\r\n            this.saving = false\r\n          })\r\n        }\r\n      })\r\n    },\r\n    toGold () {\r\n      // We could be going from limited OR premium to gold\r\n      const userType = this.user.accountType.name\r\n      if (userType === accountTypes.LIMITED.name) {\r\n        return this.limitedToGold()\r\n      } else if (userType === accountTypes.PREMIUM.name) {\r\n        return this.premiumToGold()\r\n      }\r\n    },\r\n    premiumToGold () {\r\n      this.payment.open({\r\n        email: this.user.email,\r\n        description: accountPayments.GOLD.display,\r\n        amount: accountPayments.GOLD.amount,\r\n        token: token => {\r\n          this.error = false\r\n          this.saving = true\r\n          authApi.upgrade({\r\n            oldAccountType: accountTypes.PREMIUM.name,\r\n            newAccountType: accountTypes.GOLD.name,\r\n            token\r\n          }).then(() => {\r\n            this.error = false\r\n            this.saving = false\r\n            this.showSuccessPage()\r\n          }, err => {\r\n            console.error(err)\r\n            this.error = true\r\n            this.saving = false\r\n          })\r\n        }\r\n      })\r\n    },\r\n    paidToLimited () {\r\n      swal({\r\n        buttons: true,\r\n        dangerMode: true,\r\n        icon: 'warning',\r\n        text: `Do you want to downgrade to a Limited account? You'll lose access to your documents on all other computers, and your data will be deleted if it exceeds the space your browser allows. Premium content (like workshops) will be lost.`,\r\n        title: 'Downgrade to Limited account?'\r\n      }).then((willDowngrade) => {\r\n        if (!willDowngrade) {\r\n          return\r\n        }\r\n\r\n        this.error = false\r\n        this.saving = true\r\n\r\n        api.fullExport().then(exported => {\r\n          return storage.doFullImport(exported)\r\n        }).then(() => {\r\n          return authApi.upgrade({\r\n            oldAccountType: this.user.accountType.name,\r\n            newAccountType: accountTypes.LIMITED.name\r\n          })\r\n        }).then(() => {\r\n          this.error = false\r\n          this.saving = false\r\n          this.showSuccessPage()\r\n        }, err => {\r\n          console.error(err)\r\n          this.error = true\r\n          this.saving = false\r\n        })\r\n      })\r\n    },\r\n    goldToPremium () {\r\n      this.payment.open({\r\n        email: this.user.email,\r\n        description: accountPayments.PREMIUM.display,\r\n        amount: accountPayments.PREMIUM.amount,\r\n        token: token => {\r\n          this.error = false\r\n          this.saving = true\r\n\r\n          authApi.upgrade({\r\n            oldAccountType: accountTypes.GOLD.name,\r\n            newAccountType: accountTypes.PREMIUM.name,\r\n            token\r\n          }).then(() => {\r\n            this.error = false\r\n            this.saving = false\r\n            this.showSuccessPage()\r\n          }, err => {\r\n            console.error(err)\r\n            this.error = true\r\n            this.saving = false\r\n          })\r\n        }\r\n      })\r\n    },\r\n    showSuccessPage () {\r\n      this.$router.push('/success')\r\n    },\r\n    updatePayment () {\r\n      const paymentData = accountPayments[this.user.accountType.name]\r\n\r\n      this.payment.open({\r\n        email: this.user.email,\r\n        description: paymentData.display,\r\n        amount: paymentData.amount,\r\n        token: token => {\r\n          this.error = false\r\n          this.saving = true\r\n\r\n          authApi.updatePayment({ token }).then(() => {\r\n            this.error = false\r\n            this.saving = false\r\n            this.showSuccessPage()\r\n          }, err => {\r\n            console.error(err)\r\n            this.error = true\r\n            this.saving = false\r\n          })\r\n        }\r\n      })\r\n    }\r\n  },\r\n  mounted () {\r\n    this.payment = window.StripeCheckout.configure({\r\n      key: window.stripePublicKey,\r\n      image: iconSmall,\r\n      color: 'white',\r\n      locale: 'auto',\r\n      name: 'Novelist LLC',\r\n      zipCode: true,\r\n      allowRememberMe: false\r\n    })\r\n  },\r\n  destroyed () {\r\n    this.payment.close()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\nhr {\r\n  margin: 8px 0;\r\n  width: 100%;\r\n}\r\n\r\n.wrap {\r\n  align-items: center;\r\n  display: flex;\r\n  flex: 1;\r\n  flex-direction: column;\r\n}\r\n\r\n.account, .payment, .upgrade, .delete {\r\n  max-width: 1200px;\r\n  padding: 0 50px;\r\n  width: 100%;\r\n}\r\n\r\n.payment {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.upgrade {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.price {\r\n  font-size: 12px;\r\n  margin: 0 0 4px 0;\r\n}\r\n\r\n.above-small {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.small {\r\n  color: red;\r\n  font-size: 10px;\r\n  margin: 0 0 4px 0;\r\n}\r\n\r\n.cancel {\r\n  margin: 12px 0;\r\n  text-align: center;\r\n}\r\n\r\n.error {\r\n  color: red;\r\n  margin: 8px 0;\r\n}\r\n</style>\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wrap\"},[_c('div',{staticClass:\"account\"},[_c('h1',{staticClass:\"type\"},[_vm._v(\"You have a \"+_vm._s(_vm.accountType)+\".\")]),_vm._v(\" \"),(_vm.isPremium)?_c('h4',{staticClass:\"thanks\"},[_vm._v(\"Thanks for supporting Edward!\")]):_vm._e()]),_vm._v(\" \"),(_vm.isPremium)?_c('hr'):_vm._e(),_vm._v(\" \"),(_vm.isPremium)?_c('div',{staticClass:\"payment\"},[(!_vm.isOverdue && _vm.paymentDueDate)?_c('p',[_vm._v(\"Your next payment is due on \"+_vm._s(_vm.paymentDueDate)+\".\")]):_vm._e(),_vm._v(\" \"),(_vm.isOverdue)?_c('p',{staticClass:\"error\"},[_vm._v(\"\\n      Your account is overdue. You cannot access the app until you downgrade to a Limited account or make a successful payment.\\n    \")]):_vm._e(),_vm._v(\" \"),_c('p',[_vm._v(\"\\n      Click here to update your payment method.\\n    \")]),_vm._v(\" \"),_c('button',{on:{\"click\":function($event){_vm.updatePayment()}}},[_vm._v(\"\\n      Update Payment Method\\n    \")])]):_vm._e(),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('div',{staticClass:\"upgrade\"},[(_vm.isGold)?_c('div',[_c('p',{staticClass:\"above-small\"},[_vm._v(\"\\n        Don't want your Gold account any more?\\n      \")]),_vm._v(\" \"),_c('p',{staticClass:\"small\"},[_vm._v(\"\\n        Please back up all of your documents first.\\n      \")]),_vm._v(\" \"),_c('button',{on:{\"click\":function($event){_vm.goldToPremium()}}},[_vm._v(\"\\n        Revert to Premium\\n      \")])]):_vm._e(),_vm._v(\" \"),(!_vm.isPremium)?_c('div',[_c('p',{staticClass:\"above-small\"},[_vm._v(\"\\n        Upgrade to a Premium account to access your novels from anywhere.\\n      \")]),_vm._v(\" \"),_c('p',{staticClass:\"price\"},[_vm._v(\"($2.99 per month, up to 10,000 pages)\")]),_vm._v(\" \"),_c('button',{staticClass:\"button-green\",on:{\"click\":function($event){_vm.limitedToPremium()}}},[_vm._v(\"\\n        Go Premium\\n      \")])]):_vm._e(),_vm._v(\" \"),(!_vm.isGold)?_c('div',[_c('p',{staticClass:\"above-small\"},[_vm._v(\"\\n        Upgrade to a Gold account for extra Premium storage space.\\n      \")]),_vm._v(\" \"),_c('p',{staticClass:\"price\"},[_vm._v(\"($10 per month, up to 125,000 pages)\")]),_vm._v(\" \"),_c('button',{staticClass:\"button-gold\",on:{\"click\":function($event){_vm.toGold()}}},[_vm._v(\"\\n        Go Gold\\n      \")])]):_vm._e(),_vm._v(\" \"),(_vm.isPremium)?_c('div',[_c('p',{staticClass:\"above-small\"},[_vm._v(\"\\n        Want to downgrade to a Limited account?\\n      \")]),_vm._v(\" \"),_c('p',{staticClass:\"small\"},[_vm._v(\"\\n        Please back up all of your documents first. They may not fit in your browser's storage.\\n      \")]),_vm._v(\" \"),_c('button',{on:{\"click\":function($event){_vm.paidToLimited()}}},[_vm._v(\"\\n        Revert to Limited\\n      \")])]):_vm._e(),_vm._v(\" \"),(_vm.error)?_c('div',{staticClass:\"error\"},[_vm._v(\"\\n      There has been a critical error. \"),_c('strong',[_vm._v(\"Your account change was not successful.\")]),_vm._v(\"\\n      Please try again or contact support at \"),_c('a',{attrs:{\"href\":\"mailto:support@edwardtheapp.com\"}},[_vm._v(\"support@edwardtheapp.com\")]),_vm._v(\".\\n    \")]):_vm._e()]),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('div',{staticClass:\"delete\"},[_c('router-link',{attrs:{\"to\":\"/delete-account\"}},[_c('button',{staticClass:\"button-link\"},[_vm._v(\"Delete my account\")])])],1),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('div',{staticClass:\"cancel\"},[(_vm.saving)?_c('pulse-loader'):_vm._e(),_vm._v(\" \"),_c('button',{staticClass:\"button-link\",attrs:{\"disabled\":_vm.saving},on:{\"click\":function($event){_vm.cancel()}}},[_vm._v(\"\\n      Go back to the app\\n    \")])],1)])}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","import clone from 'lodash/clone'\r\nimport localForage from 'localforage'\r\nimport { orderPromises } from '../../../utilities'\r\nimport uniq from 'lodash/uniq'\r\n\r\nclass LocalStorageApi {\r\n  constructor (username) {\r\n    localForage.setDriver([localForage.INDEXEDDB, localForage.WEBSQL, localForage.LOCALSTORAGE])\r\n    this.storage = localForage\r\n    window._storage = this.storage\r\n    this.getStorageKeys = () => this.storage.keys()\r\n\r\n    this.planKeyPrefix = documentGuid => `${documentGuid}_PLAN_DATA_`\r\n    this.planOrderKey = documentGuid => `${documentGuid}_PLAN_ORDER`\r\n    this.getPlanKey = (documentGuid, planGuid) => `${this.planKeyPrefix(documentGuid)}${planGuid}`\r\n\r\n    this.sectionKeyPrefix = (documentGuid, planGuid) => `${documentGuid}_SECTION_DATA_${planGuid}_`\r\n    this.sectionOrderKey = (documentGuid, planGuid) => `${documentGuid}_SECTION_ORDER_${planGuid}`\r\n    this.getSectionKey = (documentGuid, planGuid, sectionGuid) => `${this.sectionKeyPrefix(documentGuid, planGuid)}${sectionGuid}`\r\n\r\n    this.chapterKeyPrefix = documentGuid => `${documentGuid}_CHAPTER_DATA_`\r\n    this.chapterOrderKey = documentGuid => `${documentGuid}_CHAPTER_ORDER`\r\n    this.getChapterKey = (documentGuid, chapterGuid) => `${this.chapterKeyPrefix(documentGuid)}${chapterGuid}`\r\n\r\n    this.topicKeyPrefix = documentGuid => `${documentGuid}_TOPIC_DATA_`\r\n    this.topicOrderKey = documentGuid => `${documentGuid}_TOPIC_ORDER`\r\n    this.getTopicKey = (documentGuid, topicGuid) => `${this.topicKeyPrefix(documentGuid)}${topicGuid}`\r\n\r\n    this.legacyDocumentGuids = `DOCUMENT_IDS`\r\n    this.documentGuidsKey = `${username}_DOCUMENT_IDS`\r\n    this.documentsKey = documentGuid => `DOCUMENT_${documentGuid}`\r\n  }\r\n\r\n  // INFO\r\n  isPremium () {\r\n    return false\r\n  }\r\n\r\n  addDocument ({ guid, name }) {\r\n    return this._getAllDocumentGuids().then(documentGuids => {\r\n      if (!documentGuids.includes(guid)) {\r\n        documentGuids.push(guid)\r\n        return this.storage.setItem(this.documentGuidsKey, documentGuids)\r\n      }\r\n    }).then(\r\n      () => this.storage.setItem(this.documentsKey(guid), { guid, name })\r\n    )\r\n  }\r\n\r\n  arrangeChapters (documentGuid, chapterGuids) {\r\n    return this.storage.setItem(this.chapterOrderKey(documentGuid), chapterGuids)\r\n  }\r\n\r\n  arrangePlans (documentGuid, planGuids) {\r\n    return this.storage.setItem(this.planOrderKey(documentGuid), planGuids)\r\n  }\r\n\r\n  arrangeSections (documentGuid, planGuid, sectionGuids) {\r\n    return this.storage.setItem(this.sectionOrderKey(documentGuid, planGuid), sectionGuids)\r\n  }\r\n\r\n  arrangeTopics (documentGuid, topicGuids) {\r\n    return this.storage.setItem(this.topicOrderKey(documentGuid), topicGuids)\r\n  }\r\n\r\n  deleteChapter (documentGuid, chapterGuid) {\r\n    const key = this.getChapterKey(documentGuid, chapterGuid)\r\n    return this.storage.removeItem(key)\r\n  }\r\n\r\n  deleteDocument (guid) {\r\n    // Remove document from document list\r\n    return this._getAllDocumentGuids().then(documentGuids => {\r\n      if (documentGuids.includes(guid)) {\r\n        documentGuids.splice(documentGuids.indexOf(guid), 1)\r\n      }\r\n\r\n      return this.storage.setItem(this.documentGuidsKey, documentGuids)\r\n    }).then(() => {\r\n      // Remove all content (chapters, plans, sections, topics)\r\n      return Promise.all([\r\n        this._getAllChapters(guid).then(chapters =>\r\n          Promise.all(chapters.map(chapter => this.deleteChapter(guid, chapter.guid)))\r\n        ),\r\n        this._getAllPlans(guid).then(plans => {\r\n          return Promise.all(plans.map(plan => {\r\n            return this._getAllSections(guid, plan.guid).then(sections =>\r\n              Promise.all(sections.map(section => this.deleteSection(guid, plan.guid, section.guid)))\r\n            ).then(() => this.deletePlan(guid, plan.guid))\r\n          }))\r\n        }),\r\n        this._getAllTopics(guid).then(topics =>\r\n          Promise.all(topics.map(topic => this.deleteTopic(guid, topic.guid)))\r\n        )\r\n      ]).then(() => this.storage.removeItem(this.documentsKey(guid)))\r\n    })\r\n  }\r\n\r\n  deletePlan (documentGuid, planGuid) {\r\n    const key = this.getPlanKey(documentGuid, planGuid)\r\n    return this.storage.removeItem(key)\r\n  }\r\n\r\n  deleteSection (documentGuid, planGuid, sectionGuid) {\r\n    const key = this.getSectionKey(documentGuid, planGuid, sectionGuid)\r\n    return this.storage.removeItem(key)\r\n  }\r\n\r\n  deleteTopic (documentGuid, topicGuid) {\r\n    const key = this.getTopicKey(documentGuid, topicGuid)\r\n    return this.storage.removeItem(key)\r\n  }\r\n\r\n  deleteWorkshop (documentGuid, workshopGuid) {\r\n    throw new Error('Workshops are a Premium-only feature.')\r\n  }\r\n\r\n  _getAllChapters (documentGuid) {\r\n    const prefix = this.chapterKeyPrefix(documentGuid)\r\n\r\n    return Promise.all([\r\n      this._getChaptersSortOrder(documentGuid),\r\n      this.getStorageKeys().then(keys => keys.filter(key => key.startsWith(prefix)))\r\n    ]).then(([sortOrder, keys]) => {\r\n      return Promise.all(keys.map(key => this.storage.getItem(key))).then(chapters => {\r\n        chapters.sort((chap1, chap2) => {\r\n          return sortOrder.indexOf(chap1.guid) - sortOrder.indexOf(chap2.guid)\r\n        })\r\n\r\n        return chapters\r\n      })\r\n    })\r\n  }\r\n\r\n  getAllChapters (documentGuid) {\r\n    return this._getAllChapters(documentGuid)\r\n  }\r\n\r\n  _getAllDocumentGuids () {\r\n    // Migrate old document guids to an email-identified key\r\n    return Promise.all([\r\n      this.storage.getItem(this.legacyDocumentGuids),\r\n      this.storage.getItem(this.documentGuidsKey)\r\n    ]).then(([legacyGuids, guids]) => {\r\n      if (Array.isArray(legacyGuids)) {\r\n        var allGuids = uniq(legacyGuids.concat(guids || []))\r\n        return (\r\n          this.storage.setItem(this.documentGuidsKey, allGuids)\r\n            .then(() => this.storage.removeItem(this.legacyDocumentGuids))\r\n            .then(() => allGuids)\r\n        )\r\n      }\r\n      return uniq(guids || [])\r\n    })\r\n  }\r\n\r\n  _getAllDocuments () {\r\n    return this._getAllDocumentGuids().then(guids => Promise.all(guids.map(guid => {\r\n      const key = this.documentsKey(guid)\r\n      return this.storage.getItem(key)\r\n    })))\r\n  }\r\n\r\n  getAllDocuments () {\r\n    return this._getAllDocuments()\r\n  }\r\n\r\n  _getAllPlans (documentGuid) {\r\n    const prefix = this.planKeyPrefix(documentGuid)\r\n\r\n    return Promise.all([\r\n      this._getPlansSortOrder(documentGuid),\r\n      this.getStorageKeys().then(keys => keys.filter(key => key.startsWith(prefix)))\r\n    ]).then(([sortOrder, keys]) => {\r\n      return Promise.all(keys.map(key => this.storage.getItem(key))).then(plans => {\r\n        return Promise.all(plans.map(plan => {\r\n          return this._getAllSections(documentGuid, plan.guid).then(sections => {\r\n            plan.sections = sections\r\n          })\r\n        })).then(() => {\r\n          plans.sort((plan1, plan2) => {\r\n            return sortOrder.indexOf(plan1.guid) - sortOrder.indexOf(plan2.guid)\r\n          })\r\n          return plans\r\n        })\r\n      })\r\n    })\r\n  }\r\n\r\n  getAllPlans (documentGuid) {\r\n    return this._getAllPlans(documentGuid)\r\n  }\r\n\r\n  _getAllSections (documentGuid, planGuid) {\r\n    const prefix = this.sectionKeyPrefix(documentGuid, planGuid)\r\n\r\n    return Promise.all([\r\n      this._getSectionSortOrder(documentGuid, planGuid),\r\n      this.getStorageKeys().then(keys => keys.filter(key => key.startsWith(prefix)))\r\n    ]).then(([sortOrder, keys]) => {\r\n      return Promise.all(keys.map(key => this.storage.getItem(key))).then(sections => {\r\n        sections.sort((section1, section2) => {\r\n          return sortOrder.indexOf(section1.guid) - sortOrder.indexOf(section2.guid)\r\n        })\r\n        return sections\r\n      })\r\n    })\r\n  }\r\n\r\n  _getAllTopics (documentGuid) {\r\n    const prefix = this.topicKeyPrefix(documentGuid)\r\n\r\n    return Promise.all([\r\n      this._getTopicsSortOrder(documentGuid),\r\n      this.getStorageKeys().then(keys => keys.filter(key => key.startsWith(prefix)))\r\n    ]).then(([sortOrder, keys]) => {\r\n      return Promise.all(keys.map(key => this.storage.getItem(key))).then(topics => {\r\n        topics.sort((topic1, topic2) => {\r\n          return sortOrder.indexOf(topic1.guid) - sortOrder.indexOf(topic2.guid)\r\n        })\r\n        return topics\r\n      })\r\n    })\r\n  }\r\n\r\n  getAllTopics (documentGuid) {\r\n    return this._getAllTopics(documentGuid)\r\n  }\r\n\r\n  _getChaptersSortOrder (documentGuid) {\r\n    return this.storage.getItem(this.chapterOrderKey(documentGuid)).then(sortOrder => sortOrder || [])\r\n  }\r\n\r\n  _getPlansSortOrder (documentGuid) {\r\n    return this.storage.getItem(this.planOrderKey(documentGuid)).then(sortOrder => sortOrder || [])\r\n  }\r\n\r\n  _getSectionSortOrder (documentGuid, planGuid) {\r\n    return this.storage.getItem(this.sectionOrderKey(documentGuid, planGuid)).then(sortOrder => sortOrder || [])\r\n  }\r\n\r\n  _getTopicsSortOrder (documentGuid) {\r\n    return this.storage.getItem(this.topicOrderKey(documentGuid)).then(sortOrder => sortOrder || [])\r\n  }\r\n\r\n  getAllWorkshops () {\r\n    throw new Error('Workshops are a Premium-only feature.')\r\n  }\r\n\r\n  saveAllContent (documentGuid, { chapters, plans, topics }) {\r\n    const updateTopicFns = topics.map(topic => () => this.updateTopic(documentGuid, topic.guid, topic))\r\n    const updateTopicPromise = orderPromises(updateTopicFns)\r\n    const updateChapterPromise = updateTopicPromise.then(() => {\r\n      const updateChapterFns = chapters.map(chapter => () => this.updateChapter(documentGuid, chapter.guid, chapter))\r\n      return orderPromises(updateChapterFns)\r\n    })\r\n\r\n    const updatePlanFns = plans.map(\r\n      plan => () => this.updatePlan(documentGuid, plan.guid, plan).then(() => {\r\n        const updateSectionFns = plan.sections.map(section => () => this.updateSection(documentGuid, plan.guid, section.guid, section))\r\n        return orderPromises(updateSectionFns)\r\n      })\r\n    )\r\n    const updatePlanPromise = orderPromises(updatePlanFns)\r\n\r\n    return Promise.all([updateChapterPromise, updatePlanPromise])\r\n  }\r\n\r\n  updateChapter (documentGuid, chapterGuid, chapter) {\r\n    if (!documentGuid) {\r\n      return\r\n    }\r\n\r\n    const key = this.getChapterKey(documentGuid, chapterGuid)\r\n    return Promise.all([\r\n      this.storage.setItem(key, chapter),\r\n      this._getChaptersSortOrder(documentGuid).then((sortOrder = []) => {\r\n        if (!sortOrder.includes(chapterGuid)) {\r\n          sortOrder.push(chapterGuid)\r\n          return this.arrangeChapters(documentGuid, sortOrder)\r\n        }\r\n      })\r\n    ])\r\n  }\r\n\r\n  updateDocument ({ guid, name }) {\r\n    return this.storage.setItem(this.documentsKey(guid), { guid, name })\r\n  }\r\n\r\n  updatePlan (documentGuid, planGuid, plan) {\r\n    if (!documentGuid) {\r\n      return\r\n    }\r\n\r\n    const key = this.getPlanKey(documentGuid, planGuid)\r\n\r\n    plan = clone(plan)\r\n    plan.sections = null\r\n\r\n    return Promise.all([\r\n      this.storage.setItem(key, plan),\r\n      this._getPlansSortOrder(documentGuid).then((sortOrder = []) => {\r\n        if (!sortOrder.includes(planGuid)) {\r\n          sortOrder.push(planGuid)\r\n          return this.arrangePlans(documentGuid, sortOrder)\r\n        }\r\n      })\r\n    ])\r\n  }\r\n\r\n  updateSection (documentGuid, planGuid, sectionGuid, section) {\r\n    if (!documentGuid) {\r\n      return\r\n    }\r\n\r\n    const key = this.getSectionKey(documentGuid, planGuid, sectionGuid)\r\n\r\n    return Promise.all([\r\n      this.storage.setItem(key, section),\r\n      this._getSectionSortOrder(documentGuid, planGuid).then((sortOrder = []) => {\r\n        if (!sortOrder.includes(sectionGuid)) {\r\n          sortOrder.push(sectionGuid)\r\n          return this.arrangeSections(documentGuid, sortOrder)\r\n        }\r\n      })\r\n    ])\r\n  }\r\n\r\n  updateTopic (documentGuid, topicGuid, topic) {\r\n    if (!documentGuid) {\r\n      return\r\n    }\r\n\r\n    const key = this.getTopicKey(documentGuid, topicGuid)\r\n\r\n    return Promise.all([\r\n      this.storage.setItem(key, topic),\r\n      this._getTopicsSortOrder(documentGuid).then((sortOrder = []) => {\r\n        if (!sortOrder.includes(topicGuid)) {\r\n          sortOrder.push(topicGuid)\r\n          return this.arrangeTopics(documentGuid, sortOrder)\r\n        }\r\n      })\r\n    ])\r\n  }\r\n\r\n  updateWorkshops (documentGuid, workshops) {\r\n    throw new Error('Workshops are a Premium-only feature.')\r\n  }\r\n\r\n  /*\r\n    FULL EXPORT / IMPORT\r\n  */\r\n\r\n  docExport (guid, name) {\r\n    return Promise.all([\r\n      this._getAllChapters(guid),\r\n      this._getAllTopics(guid),\r\n      this._getAllPlans(guid).then(plans => {\r\n        return Promise.all(plans.map(plan => {\r\n          return this._getAllSections(guid, plan.guid).then(sections => {\r\n            plan.sections = sections\r\n            return plan\r\n          })\r\n        }))\r\n      })\r\n    ]).then(([chapters, topics, plans]) => {\r\n      const doc = {\r\n        guid,\r\n        name,\r\n        chapters,\r\n        topics,\r\n        plans\r\n      }\r\n      return doc\r\n    })\r\n  }\r\n\r\n  docImport (doc) {\r\n    let backup\r\n    return this.docExport(doc.guid).then(_backup => {\r\n      backup = _backup\r\n    }).then(() => {\r\n      return this.deleteDocument(doc.guid)\r\n    }).then(() => {\r\n      if (!doc) {\r\n        throw new Error('Attempted to import an empty backup')\r\n      }\r\n\r\n      return this.addDocument(doc).then(() => this.saveAllContent(doc.guid, doc))\r\n    }).then(undefined, err => {\r\n      console.error(err)\r\n      return this.addDocument(backup).then(() => this.saveAllContent(backup.guid, backup))\r\n    })\r\n  }\r\n\r\n  getFullExport () {\r\n    return this._getAllDocuments().then(documents => {\r\n      return Promise.all(documents.map(doc => {\r\n        return Promise.all([\r\n          this._getAllChapters(doc.guid),\r\n          this._getAllTopics(doc.guid),\r\n          this._getAllPlans(doc.guid).then(plans => {\r\n            return Promise.all(plans.map(plan =>\r\n              this._getAllSections(doc.guid, plan.guid).then(sections => {\r\n                plan.sections = sections\r\n                return plan\r\n              })\r\n            ))\r\n          })\r\n        ]).then(([chapters, topics, plans]) => {\r\n          doc.chapters = chapters\r\n          doc.topics = topics\r\n          doc.plans = plans\r\n          return doc\r\n        })\r\n      }))\r\n    })\r\n  }\r\n\r\n  revertImport (backup) {\r\n    return (\r\n      Promise.all(Object.keys(backup).map(key => this.storage.setItem(key, backup[key])))\r\n        .then(undefined, importErr => {\r\n          console.error(importErr)\r\n          throw importErr\r\n        })\r\n    )\r\n  }\r\n\r\n  doFullImport (documents) {\r\n    const backup = {}\r\n\r\n    return this.storage.iterate((value, key) => {\r\n      backup[key] = value\r\n    }).then(() => {\r\n      return this.storage.clear().then(() => {\r\n        if (!documents || !Array.isArray(documents) || !documents.length) {\r\n          throw new Error('Attempted to import an empty backup')\r\n        }\r\n\r\n        const addDocumentPromises = documents.map(doc =>\r\n          () => this.addDocument(doc).then(() => this.saveAllContent(doc.guid, doc))\r\n        )\r\n\r\n        return orderPromises(addDocumentPromises)\r\n      })\r\n    }).then(undefined, err => {\r\n      console.error(err)\r\n      return this.revertImport(backup)\r\n    })\r\n  }\r\n}\r\n\r\nexport default LocalStorageApi\r\n","// Complete an array of promises in order, each one waiting for the previous one to resolve\r\nfunction orderPromises (promiseFns) {\r\n  if (!Array.isArray(promiseFns) || (promiseFns.length && typeof promiseFns[0] !== 'function')) {\r\n    throw new TypeError('orderPromises expects an array of functions. Received: ' + JSON.stringify(promiseFns))\r\n  }\r\n\r\n  if (!promiseFns.length) {\r\n    return Promise.resolve()\r\n  }\r\n\r\n  const promise = promiseFns[0]()\r\n\r\n  if (!promise.then) {\r\n    throw new TypeError('A function in the array passed to orderPromises did not return a promise. Returned: ' + JSON.stringify(promise))\r\n  }\r\n\r\n  return promise.then(function () {\r\n    return orderPromises(promiseFns.slice(1))\r\n  })\r\n}\r\n\r\n// getNewLine, getNewSegment, getStyles, getStyledArrayFromChapters:\r\n// From an array of Edward chapters, produce an array of Line objects.\r\n// Line { text: string | Segment[], style: string | string[], pageBreak: undefined | 'before' }\r\n// Segment { text: string, style: string[] }\r\n// Line style strings: h1|h2|h3|blockquote|ul|ol|chapterHeading\r\n// Segment style strings: bold|italic|underline|strike\r\n\r\nfunction getNewLine () {\r\n  return {\r\n    text: [],\r\n    style: []\r\n  }\r\n}\r\n\r\nfunction getNewSegment (text, style) {\r\n  return {\r\n    text: text || '',\r\n    style: style || []\r\n  }\r\n}\r\n\r\nconst listMap = {\r\n  'bullet': 'ul',\r\n  'ordered': 'ol'\r\n}\r\nfunction getStyles (attributes) {\r\n  const styles = []\r\n  const lineStyles = []\r\n\r\n  if (!attributes) {\r\n    return { styles, lineStyles }\r\n  }\r\n\r\n  for (const attr in attributes) {\r\n    if (['bold', 'italic', 'underline', 'strike'].includes(attr)) {\r\n      styles.push(attr)\r\n      continue\r\n    }\r\n\r\n    if (attr === 'header') {\r\n      lineStyles.push(`h${attributes[attr]}`)\r\n      continue\r\n    }\r\n\r\n    if (attr === 'blockquote') {\r\n      lineStyles.push('blockquote')\r\n      continue\r\n    }\r\n\r\n    if (attr === 'list') {\r\n      lineStyles.push(listMap[attributes[attr]])\r\n      continue\r\n    }\r\n  }\r\n\r\n  return { styles, lineStyles }\r\n}\r\n\r\nfunction getStyledArrayFromChapters (chapters) {\r\n  const splitContent = []\r\n\r\n  for (const chapter of chapters) {\r\n    splitContent.push({\r\n      text: chapter.title,\r\n      style: 'chapterHeading',\r\n      pageBreak: 'before'\r\n    })\r\n\r\n    let currentLine = getNewLine()\r\n    const ops = (chapter.content && chapter.content.ops) || []\r\n    for (const op of ops) {\r\n      const insert = op.insert\r\n      const { styles, lineStyles } = getStyles(op.attributes)\r\n\r\n      if (lineStyles.length) {\r\n        currentLine.style.push(...lineStyles)\r\n      }\r\n\r\n      if (insert === '\\n') {\r\n        splitContent.push(currentLine)\r\n        currentLine = getNewLine()\r\n        continue\r\n      }\r\n\r\n      if (insert.includes('\\n')) {\r\n        const [first, ...lines] = insert.split('\\n')\r\n        if (first) {\r\n          const segment = getNewSegment(first, styles)\r\n          currentLine.text.push(segment)\r\n        }\r\n\r\n        splitContent.push(currentLine)\r\n        currentLine = getNewLine()\r\n\r\n        for (let ix = 0; ix < lines.length - 1; ix++) {\r\n          const line = lines[ix]\r\n          const segment = getNewSegment(line, styles)\r\n          currentLine.text.push(segment)\r\n\r\n          splitContent.push(currentLine)\r\n          currentLine = getNewLine()\r\n        }\r\n\r\n        const last = lines[lines.length - 1]\r\n        const segment = getNewSegment(last, styles)\r\n        currentLine.text.push(segment)\r\n\r\n        continue\r\n      }\r\n\r\n      const segment = getNewSegment(insert, styles)\r\n      currentLine.text.push(segment)\r\n    }\r\n  }\r\n\r\n  return splitContent\r\n}\r\n\r\nmodule.exports = {\r\n  getStyledArrayFromChapters: getStyledArrayFromChapters,\r\n  orderPromises: orderPromises\r\n}\r\n","function injectStyle (context) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4b625da0\\\",\\\"scoped\\\":true,\\\"sourceMap\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./account.page.vue\")\n}\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./account.page.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./account.page.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4b625da0\\\",\\\"hasScoped\\\":true,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./account.page.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4b625da0\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","import axiosBase from 'axios'\r\n\r\nconst axios = axiosBase.create({\r\n  headers: {\r\n    'Pragma': 'no-cache',\r\n    'Cache-Control': 'no-store'\r\n  }\r\n})\r\n\r\nconst route = route => `/api/${route}`\r\n\r\nclass Api {\r\n  simpleGet (route) {\r\n    return axios.get(route).then(response => {\r\n      return response.data\r\n    })\r\n  }\r\n  simplePost (route, body) {\r\n    return axios.post(route, body).then(response => {\r\n      return response.data\r\n    })\r\n  }\r\n\r\n  isOnline () { return this.simpleGet(route('online')) }\r\n\r\n  saveAllContent (data) { return this.simplePost(route('document/saveAll'), data) }\r\n\r\n  // DOCUMENTS\r\n  addDocument (doc) { return this.simplePost(route('document/add'), doc) }\r\n  deleteDocument (doc) { return this.simplePost(route('document/delete'), doc) }\r\n  getDocuments () {\r\n    return this.simpleGet(route('documents')).then(documents => {\r\n      return documents.map(doc => {\r\n        return doc\r\n      })\r\n    })\r\n  }\r\n  updateDocument (doc) { return this.simplePost(route('document/update'), doc) }\r\n\r\n  // CHAPTERS\r\n  arrangeChapters (data) { return this.simplePost(route('chapter/arrange'), data) }\r\n  deleteChapter (data) { return this.simplePost(route('chapter/delete'), data) }\r\n  getChapters (documentGuid) { return this.simpleGet(route(`chapters/${documentGuid}`)) }\r\n  updateChapter (data) { return this.simplePost(route('chapter/update'), data) }\r\n\r\n  // TOPICS\r\n  arrangeTopics (data) { return this.simplePost(route('topic/arrange'), data) }\r\n  deleteTopic (data) { return this.simplePost(route('topic/delete'), data) }\r\n  // This returns MasterTopics; ChapterTopics are returned with their associated chapters\r\n  getTopics (documentGuid) { return this.simpleGet(route(`topics/${documentGuid}`)) }\r\n  updateTopic (data) { return this.simplePost(route('topic/update'), data) }\r\n\r\n  // PLANS\r\n  arrangePlans (data) { return this.simplePost(route('plan/arrange'), data) }\r\n  deletePlan (data) { return this.simplePost(route('plan/delete'), data) }\r\n  getPlans (documentGuid) { return this.simpleGet(route(`plans/${documentGuid}`)) }\r\n  updatePlan (data) { return this.simplePost(route('plan/update'), data) }\r\n\r\n  // SECTIONS\r\n  arrangeSections (data) { return this.simplePost(route('section/arrange'), data) }\r\n  deleteSection (data) { return this.simplePost(route('section/delete'), data) }\r\n  // No get method; sections are returned with their associated plans\r\n  updateSection (data) { return this.simplePost(route('section/update'), data) }\r\n\r\n  // WORKSHOPS\r\n  deleteWorkshopContent ({ documentGuid, guid }) {\r\n    return this.simplePost(route('workshop-content/delete'), { documentGuid, guid })\r\n  }\r\n  getWorkshops (documentGuid) { return this.simpleGet(route(`workshop-content/${documentGuid}`)) }\r\n  updateWorkshopContents ({ documentGuid, workshops }) {\r\n    return this.simplePost(route('workshop-content/update'), { documentGuid, workshops })\r\n  }\r\n\r\n  // EXPORT/IMPORT\r\n  docExport (documentGuid) { return this.simpleGet(route(`backup/export/document/${documentGuid}`)) }\r\n  docImport ({ guid, name, chapters, topics, plans, workshops }) {\r\n    return this.simplePost(route(`backup/import/document`), { guid, name, chapters, topics, plans, workshops })\r\n  }\r\n  fullExport () { return this.simpleGet(route('backup/export')) }\r\n  fullImport (data) { return this.simplePost(route('backup/import'), data) }\r\n  exportToWord ({ guid, title, includeArchived }) {\r\n    return new Promise(resolve => {\r\n      window.open(route(`word/export-chapters?guid=${guid}&title=${title}&includeArchived=${!!includeArchived}`), '_blank')\r\n      resolve()\r\n    })\r\n  }\r\n}\r\n\r\nexport default new Api()\r\n","module.exports = \"data:image/png;base64,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\""],"sourceRoot":""}